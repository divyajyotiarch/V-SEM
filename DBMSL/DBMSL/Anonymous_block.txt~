set serveroutput on;
declare 

fine 	number(10);
days	number(10);
CURSOR c IS SELECT * FROM customer05;

begin

for id in c
loop

	dbms_output.put_line(id.cust_id);
	days := sysdate - id.dop ;
	exception when VALUE_ERROR then 
		raise_application_error(-6502,'No fine to be paid');
		update customer05 set status='noFine' where  cust_id=id.cust_id; 
	if(days > 15 and days < 30) then
		fine := days*5;
		update customer05 set status='p' where cust_id=id.cust_id; 
		dbms_output.put_line('Fine is '|| fine);
	elsif (days >= 30) then
		fine := days*50;
		update customer05 set status='p' where cust_id=id.cust_id; 
		dbms_output.put_line('Fine is '|| fine);
		
	end if;
		

	insert into fine05 (cust_id,c_date,amt) values (id.cust_id,sysdate,fine);

	end loop;

end;
/

